<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/wasm4/blog/rss.xml" title="WASM-4 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/wasm4/blog/atom.xml" title="WASM-4 Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="WASM-4" href="/wasm4/opensearch.xml"><title data-react-helmet="true">Creating the Snake | WASM-4</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wasm4.org/wasm4/docs/tutorials/snake/creating-the-snake"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Creating the Snake | WASM-4"><meta data-react-helmet="true" name="description" content="Let&#x27;s take a look at the main component of the game: The snake. There are several ways to implement one."><meta data-react-helmet="true" property="og:description" content="Let&#x27;s take a look at the main component of the game: The snake. There are several ways to implement one."><meta data-react-helmet="true" property="og:image" content="https://wasm4.org/wasm4/img/logo.png"><meta data-react-helmet="true" name="twitter:image" content="https://wasm4.org/wasm4/img/logo.png"><link data-react-helmet="true" rel="shortcut icon" href="/wasm4/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wasm4.org/wasm4/docs/tutorials/snake/creating-the-snake"><link data-react-helmet="true" rel="alternate" href="https://wasm4.org/wasm4/docs/tutorials/snake/creating-the-snake" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wasm4.org/wasm4/docs/tutorials/snake/creating-the-snake" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/wasm4/assets/css/styles.1cf596c0.css">
<link rel="preload" href="/wasm4/assets/js/runtime~main.53a02d92.js" as="script">
<link rel="preload" href="/wasm4/assets/js/main.fc48bf66.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/wasm4/"><img src="/wasm4/img/logo.svg" alt="WASM-4 Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/wasm4/img/logo.svg" alt="WASM-4 Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">WASM-4</b></a><a class="navbar__item navbar__link" href="/wasm4/play">Play</a><a class="navbar__item navbar__link navbar__link--active" href="/wasm4/docs/">Learn</a><a class="navbar__item navbar__link" href="/wasm4/blog">Blog</a><a class="navbar__item navbar__link" href="/wasm4/community">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/aduros/wasm4" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/wasm4/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/getting-started/setup">Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/getting-started/hello-world">Hello World</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/basic-drawing">Drawing Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/user-input">Handling User Input</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/sprites">Drawing Sprites</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/text">Drawing Text</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/audio">Playing Audio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/saving-data">Saving Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/multiplayer">Multiplayer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/distribution">Distribution</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Reference</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/reference/functions">Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/reference/memory">Memory Layout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/reference/hotkeys">Emulator Hotkeys</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/reference/cli">CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/reference/inspiration">Inspiration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Snake</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/tutorials/snake/goal">Inspiration &amp; Goals</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/tutorials/snake/setup-project">Setup Your Project</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/tutorials/snake/setting-color-palette">Setting Color Palette</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/wasm4/docs/tutorials/snake/creating-the-snake">Creating the Snake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/tutorials/snake/drawing-the-snake">Drawing the Snake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/tutorials/snake/moving-the-snake">Moving the Snake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/tutorials/snake/handling-user-input">User Input</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/tutorials/snake/placing-the-fruit">Placing the Fruit</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/tutorials/snake/collision-detection">Collision Detection</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/tutorials/snake/further-ideas">Further Ideas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/tutorials/snake/publish-your-game">Publish Your Game</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Making music with IWAS</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Creating the Snake</h1></header><p>Let&#x27;s take a look at the main component of the game: The snake. There are several ways to implement one.</p><div><div class="multilang"><div class="dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">AssemblyScript </a><ul class="dropdown__menu text--left"><li><a class="dropdown__link dropdown__link--active" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=assemblyscript#no-scroll">AssemblyScript</a></li><li><a class="dropdown__link" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=c#no-scroll">C / C++</a></li><li><a class="dropdown__link" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=d#no-scroll">D</a></li><li><a class="dropdown__link" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=go#no-scroll">Go</a></li><li><a class="dropdown__link" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=nelua#no-scroll">Nelua</a></li><li><a class="dropdown__link" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=nim#no-scroll">Nim</a></li><li><a class="dropdown__link" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=odin#no-scroll">Odin</a></li><li><a class="dropdown__link" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=porth#no-scroll">Porth</a></li><li><a class="dropdown__link" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=rust#no-scroll">Rust</a></li><li><a class="dropdown__link" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=wat#no-scroll">WebAssembly Text</a></li><li><a class="dropdown__link" href="/wasm4/docs/tutorials/snake/creating-the-snake?code-lang=zig#no-scroll">Zig</a></li></ul></div></div><div><div><p>To keep things tidy, I recommend you&#x27;d create a new file called <code>snake.ts</code>. This file contains two classes:</p><ul><li>The <code>Point</code> - Holding X and Y coordinates</li><li>The <code>Snake</code> - The actual snake implementation</li></ul><p>The content is rather simple:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Point</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">constructor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> x</span><span class="token operator">:</span><span class="token plain"> i32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">public</span><span class="token plain"> y</span><span class="token operator">:</span><span class="token plain"> i32</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">equals</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">other</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">Point</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> bool </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">this</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator">==</span><span class="token plain"> other</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token property-access">y</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">export</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">class</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Snake</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    body</span><span class="token operator">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Point</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Point</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Point</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Point</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    direction</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">Point</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">Point</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The snake class contains the body and the current direction of the snake instance.
But it lacks any functionality for now.</p></div><div hidden=""><p>In this section we will define a structure to hold our snake.</p><p>Create a new file called <code>snake.h</code> and fill it with the code-snippet below.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">pragma</span><span class="token macro property"> </span><span class="token macro property expression">once</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&lt;stdint.h&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">point</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token class-name">int16_t</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token class-name">int16_t</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">snake</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">point</span><span class="token operator">*</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">point</span><span class="token plain"> direction</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token class-name">uint16_t</span><span class="token plain"> length</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The snake type contains the body and the current direction of the snake instance. We also need to define a point struct to hold the x and y coordinates of our snake body parts.</p><p>We need to fill out the implementation of the snake. Function declarations will be added to <code>snake.h</code> and the definitions to a new file called <code>snake.c</code>.</p><p>We will work on two functions, one to create the snake, and one to add a body part to the snake.</p><p>Add the following declarations to the bottom of the <code>snake.h</code> file:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">snake_create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">snake</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">snake</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">snake_push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">snake</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">snake</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">point</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then in the <code>snake.c</code> file, we need to include our header files:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;snake.h&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&quot;wasm4.h&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(189, 147, 249);font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(255, 121, 198)">&lt;stdlib.h&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The file <code>stdlib.h</code> is required for <code>realloc</code>. The <code>snake_create</code> function <code>free</code>s any previous snake body that may have been allocated and initializes the snake struct body pointer to <code>NULL</code>, and the length to <code>0</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">snake_create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">snake</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">snake</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">snake</span><span class="token operator">-&gt;</span><span class="token plain">body </span><span class="token operator">!=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token function" style="color:rgb(80, 250, 123)">free</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">snake</span><span class="token operator">-&gt;</span><span class="token plain">body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            snake</span><span class="token operator">-&gt;</span><span class="token plain">body </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">NULL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    snake</span><span class="token operator">-&gt;</span><span class="token plain">length </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>snake_push</code> function will use the <code>realloc</code> function to allocate memory for each snake body part and assign the passed point struct value to it. When <code>realloc</code> is passed a <code>NULL</code> pointer it behaves the same as <code>malloc</code> so we can forego a <code>NULL</code> pointer check and just use <code>realloc</code>. The result of <code>realloc</code> is stored in a temporary <code>body</code> variable, when it succeeds the <code>snake-&gt;body</code> pointer is updated and the point value set.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">snake_push</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">snake</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">snake</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">point</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">point</span><span class="token operator">*</span><span class="token plain"> body </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">realloc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">snake</span><span class="token operator">-&gt;</span><span class="token plain">body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name">point</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">snake</span><span class="token operator">-&gt;</span><span class="token plain">length</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        snake</span><span class="token operator">-&gt;</span><span class="token plain">body </span><span class="token operator">=</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        snake</span><span class="token operator">-&gt;</span><span class="token plain">body</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">snake</span><span class="token operator">-&gt;</span><span class="token plain">length</span><span class="token operator">++</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><p>// TODO</p></div><div hidden=""><p>If you&#x27;ve used Go in the past, this next section won&#x27;t be too surprising for you. You&#x27;ll create a new type for the snake with the required properties.</p><p>For this, create a new file an call it <code>snake.go</code>. Then fill it with the code-snippet below.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">package</span><span class="token plain"> main</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> Point </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    X </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Y </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">type</span><span class="token plain"> Snake </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Body      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain">Point</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Direction Point</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The snake type contains the body and the current direction of the snake instance.
But it lacks any functionality for now.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>BuiltIn Type</h5></div><div class="admonition-content"><p>Go offers a buildIn type for points. It&#x27;s in <code>image</code>.
Creating our own type reduces the size of the cart.</p></div></div></div><div hidden=""><p>To keep things tidy, I recommend you&#x27;d create a new file called <code>snake.nelua</code>. This file contains two records:</p><ul><li>The <code>Point</code> - Holding X and Y coordinates</li><li>The <code>Snake</code> - The actual snake implementation</li></ul><p>The content is rather simple:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">require &quot;wasm4&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local sequence = require &quot;sequence&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local snake = @record{}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local snake.Point = @record{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  x: int32,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  y: int32,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local Point = snake.Point</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local snake.Snake = @record{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  body: sequence(Point),</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  direction: Point,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">local Snake = snake.Snake</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">function Snake.init(): Snake</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  return Snake{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    body = {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      { x = 2, y = 0 },</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      { x = 1, y = 0 },</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      { x = 0, y = 0 },</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    },</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    direction = { x = 1, y = 0 },</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">return snake</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The snake record contains the body and the current direction of the snake instance.
But it lacks any functionality for now.</p></div><div hidden=""><p>// TODO</p></div><div hidden=""><p>// TODO</p></div><div hidden=""><p>// TODO</p></div><div hidden=""><p>To keep things tidy, I recommend to create a new file called <code>snake.rs</code>.
This file contains two structs:</p><ul><li>The <code>Point</code> - Holds <code>x</code> and <code>y</code> coordinates.</li><li>The <code>Snake</code> - The actual snake implementation.</li></ul><p><code>Snake</code> has an <a href="https://doc.rust-lang.org/reference/items/associated-items.html#associated-functions-and-methods" target="_blank" rel="noopener noreferrer">associated function</a> <code>new</code> that returns a brand new snake.</p><p>We have also defined few derivable traits to <code>Point</code>:</p><ul><li><code>PartialEq</code> and <code>Eq</code> add the <code>==</code> operator to perform an equality checks between <code>Point</code> instances.</li><li><code>Clone</code> and <code>Copy</code> simplify use of <code>Point</code> instance.</li></ul><p>You can learn more about these traits in the <a href="https://doc.rust-lang.org/stable/book/" target="_blank" rel="noopener noreferrer">rust-book</a>:</p><ul><li><a href="https://doc.rust-lang.org/book/appendix-03-derivable-traits.html?highlight=partialEq#partialeq-and-eq-for-equality-comparisons" target="_blank" rel="noopener noreferrer">PartialEq, Eq</a></li><li><a href="https://doc.rust-lang.org/book/appendix-03-derivable-traits.html?highlight=partialEq#clone-and-copy-for-duplicating-values" target="_blank" rel="noopener noreferrer">Clone, Copy</a> </li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#[derive(Clone, Copy, PartialEq, Eq)]</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pub struct Point {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pub x: i32,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pub y: i32,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pub struct Snake {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pub body: Vec&lt;Point&gt;,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pub direction: Point,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">impl Snake {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pub fn new() -&gt; Self {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Self {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            body: vec![</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Point { x: 2, y: 0 },</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Point { x: 1, y: 0 },</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Point { x: 0, y: 0 },</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            ],</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            direction: Point { x: 1, y: 0 },</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Don&#x27;t forget to declare this module in <code>lib.rs</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mod snake;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><div hidden=""><p>Unfortunately, the WebAssembly text format has no way to create classes or structs. The only way to lay out the stack structure is by manually allocating memory for the snake structure.</p><p>We&#x27;ll pretend as though we have the following types. Note that they are not valid WebAssembly text definitions:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly wasm"><pre tabindex="0" class="prism-code language-wasm codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">(;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">  = 8 bytes</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">  typedef struct {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">    i32 x;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">    i32 y;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">  } Point;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="display:inline-block;color:rgb(98, 114, 164)">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">  = 3200 bytes</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">  typedef Point Body[400];</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="display:inline-block;color:rgb(98, 114, 164)">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">  = 3212 bytes</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">  typedef {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">    Point direction;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">    i32 body_length;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">    Body body;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">  } Snake;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">;)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We&#x27;ll place these values in linear memory starting at 0x19a0, which is the start of the region mapped for use by the game:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly wasm"><pre tabindex="0" class="prism-code language-wasm codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">;; snake.direction   = 0x19a0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">;; snake.body_length = 0x19a8</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">;; snake.body        = 0x19ac</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Let&#x27;s start the snake with 3 points: <code>(2, 0), (1, 0), (0, 0)</code>. The snake&#x27;s initial direction will be moving left, <code>(1, 0)</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly wasm"><pre tabindex="0" class="prism-code language-wasm codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">data</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">0x19a0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;\01\00\00\00&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;\00\00\00\00&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">;; direction (1, 0)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;\03\00\00\00&quot;</span><span class="token plain">                </span><span class="token comment" style="color:rgb(98, 114, 164)">;; body_length 3</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;\02\00\00\00&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;\00\00\00\00&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">;; body[0] = (2, 0)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;\01\00\00\00&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;\00\00\00\00&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">;; body[1] = (1, 0)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;\00\00\00\00&quot;</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;\00\00\00\00&quot;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">;; body[2] = (0, 0)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><p>To keep things tidy, I recommend you&#x27;d create a new file called <code>snake.zig</code>. This file contains two structs:</p><ul><li>The <code>Point</code> - Holding X and Y coordinates</li><li>The <code>Snake</code> - The actual snake implementation</li></ul><p>The content is rather simple:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly zig"><pre tabindex="0" class="prism-code language-zig codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">const std = @import(&quot;std&quot;);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pub const Point = struct {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    x: i32,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    y: i32,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pub fn init(x: i32, y: i32) Point {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return .{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            .x = x,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            .y = y,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        };</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pub fn equals(this: Point, other: Point) bool {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return this.x == other.x and this.y == other.y;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">};</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pub const Snake = struct {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    body: std.BoundedArray(Point, 400),</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    direction: Point,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pub fn init() Snake {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return .{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            .body = std.BoundedArray(Point, 400).fromSlice(&amp;.{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Point.init(2, 0),</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Point.init(1, 0),</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                Point.init(0, 0),</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            }) catch @panic(&quot;couldn&#x27;t init snake body&quot;),</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            .direction = Point.init(1, 0),</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        };</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">};</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The snake class contains the body and the current direction of the snake instance.
But it lacks any functionality for now.</p></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/aduros/wasm4/edit/main/site/docs/tutorials/snake/creating-the-snake.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/wasm4/docs/tutorials/snake/setting-color-palette"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Setting Color Palette</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/wasm4/docs/tutorials/snake/drawing-the-snake"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Drawing the Snake »</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/wasm4/assets/js/runtime~main.53a02d92.js"></script>
<script src="/wasm4/assets/js/main.fc48bf66.js"></script>
</body>
</html>