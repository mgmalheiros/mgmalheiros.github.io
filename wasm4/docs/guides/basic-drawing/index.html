<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="WASM-4 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="WASM-4 Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="WASM-4" href="/opensearch.xml"><title data-react-helmet="true">Drawing Basics | WASM-4</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wasm4.org/docs/guides/basic-drawing"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Drawing Basics | WASM-4"><meta data-react-helmet="true" name="description" content="The PALETTE Register"><meta data-react-helmet="true" property="og:description" content="The PALETTE Register"><meta data-react-helmet="true" property="og:image" content="https://wasm4.org/img/logo.png"><meta data-react-helmet="true" name="twitter:image" content="https://wasm4.org/img/logo.png"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wasm4.org/docs/guides/basic-drawing"><link data-react-helmet="true" rel="alternate" href="https://wasm4.org/docs/guides/basic-drawing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wasm4.org/docs/guides/basic-drawing" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.1cf596c0.css">
<link rel="preload" href="/assets/js/runtime~main.84aff5fe.js" as="script">
<link rel="preload" href="/assets/js/main.1e3cb70e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="WASM-4 Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="WASM-4 Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">WASM-4</b></a><a class="navbar__item navbar__link" href="/play">Play</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/">Learn</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/community">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/aduros/wasm4" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/setup">Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/hello-world">Hello World</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/guides/basic-drawing">Drawing Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/user-input">Handling User Input</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/sprites">Drawing Sprites</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/text">Drawing Text</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/audio">Playing Audio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/saving-data">Saving Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/multiplayer">Multiplayer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/distribution">Distribution</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Reference</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/functions">Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/memory">Memory Layout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/hotkeys">Emulator Hotkeys</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/cli">CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/inspiration">Inspiration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Snake</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Making music with IWAS</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Drawing Basics</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-palette-register"></a>The <code>PALETTE</code> Register<a class="hash-link" href="#the-palette-register" title="Direct link to heading">#</a></h2><p>WASM-4 can only display 4 colors on screen at a time. This palette&#x27;s RGB values are stored in the <code>PALETTE</code> memory register, and can be modified.</p><p>For example, to change the palette to <a href="https://lospec.com/palette-list/ice-cream-gb" target="_blank" rel="noopener noreferrer">Ice Cream GB</a>:</p><div><div class="multilang"><div class="dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">AssemblyScript </a><ul class="dropdown__menu text--left"><li><a class="dropdown__link dropdown__link--active" href="/docs/guides/basic-drawing?code-lang=assemblyscript#no-scroll">AssemblyScript</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=c#no-scroll">C / C++</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=c3#no-scroll">C3</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=d#no-scroll">D</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=go#no-scroll">Go</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=nelua#no-scroll">Nelua</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=nim#no-scroll">Nim</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=odin#no-scroll">Odin</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=penne#no-scroll">Penne</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=porth#no-scroll">Porth</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=roland#no-scroll">Roland</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=rust#no-scroll">Rust</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=wat#no-scroll">WebAssembly Text</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=zig#no-scroll">Zig</a></li></ul></div></div><div><div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token generic-function function" style="color:rgb(80, 250, 123)">store</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u32</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0xfff6d3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">sizeof</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u32</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token generic-function function" style="color:rgb(80, 250, 123)">store</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u32</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0xf9a875</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">sizeof</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u32</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token generic-function function" style="color:rgb(80, 250, 123)">store</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u32</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0xeb6b6f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">sizeof</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u32</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token generic-function function" style="color:rgb(80, 250, 123)">store</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u32</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0x7c3f58</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain"> </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">sizeof</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u32</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0xfff6d3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0xf9a875</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0xeb6b6f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0x7c3f58</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c3"><pre tabindex="0" class="prism-code language-c3 codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4::PALETTE[0] = 0xfff6d3;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4::PALETTE[1] = 0xf9a875;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4::PALETTE[2] = 0xeb6b6f;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4::PALETTE[3] = 0x7c3f58;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly d"><pre tabindex="0" class="prism-code language-d codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.palette[0] = 0xfff6d3;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.palette[1] = 0xf9a875;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.palette[2] = 0xeb6b6f;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.palette[3] = 0x7c3f58;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0xfff6d3</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0xf9a875</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0xeb6b6f</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">PALETTE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0x7c3f58</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[0] = 0xfff6d3</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[1] = 0xf9a875</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[2] = 0xeb6b6f</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[3] = 0x7c3f58</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly nim"><pre tabindex="0" class="prism-code language-nim codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[0] = 0xfff6d3</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[1] = 0xf9a875</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[2] = 0xeb6b6f</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[3] = 0x7c3f58</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly odin"><pre tabindex="0" class="prism-code language-odin codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.PALETTE[0] = 0xfff6d3</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.PALETTE[1] = 0xf9a875</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.PALETTE[2] = 0xeb6b6f</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.PALETTE[3] = 0x7c3f58</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly penne"><pre tabindex="0" class="prism-code language-penne codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[0] = 0xfff6d3;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[1] = 0xf9a875;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[2] = 0xeb6b6f;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE[3] = 0x7c3f58;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly porth"><pre tabindex="0" class="prism-code language-porth codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">0xfff6d3 $PALETTE0 !int</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">0xf9a875 $PALETTE1 !int</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">0xeb6b6f $PALETTE2 !int</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">0x7c3f58 $PALETTE3 !int</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly roland"><pre tabindex="0" class="prism-code language-roland codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">PALETTE~ = [</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   0xfff6d3,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   0xf9a875,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   0xeb6b6f,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   0x7c3f58,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">];</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">unsafe {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    *PALETTE = [</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        0xfff6d3,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        0xf9a875,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        0xeb6b6f,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        0x7c3f58,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ];</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly wasm"><pre tabindex="0" class="prism-code language-wasm codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">store</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">global</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PALETTE0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">0xfff6d3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">store</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">global</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PALETTE1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">0xf9a875</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">store</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">global</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PALETTE2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">0xeb6b6f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">store</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">global</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$PALETTE3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">0x7c3f58</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly zig"><pre tabindex="0" class="prism-code language-zig codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.PALETTE.* = .{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    0xfff6d3,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    0xf9a875,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    0xeb6b6f,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    0x7c3f58,</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">};</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>The palette colors are considered to be numbered 1-4, even though they may be accessed with indices 0-3.</p><p>The default Gameboy-ish palette looks like this:</p><div class="row row--no-gutters"><div class="col col--2" style="padding:1.5rem;background:#e0f8cf;color:#000">Color 1</div><div class="col col--2" style="padding:1.5rem;background:#86c06c;color:#000">Color 2</div><div class="col col--2" style="padding:1.5rem;background:#306850;color:#fff">Color 3</div><div class="col col--2" style="padding:1.5rem;background:#071821;color:#fff">Color 4</div></div><p>The first color in the palette register is used as the screen background color.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-draw_colors-register"></a>The <code>DRAW_COLORS</code> Register<a class="hash-link" href="#the-draw_colors-register" title="Direct link to heading">#</a></h2><p><code>DRAW_COLORS</code> is a set of 4 indexes into <code>PALETTE</code>. Drawing functions use these indexes to
decide which colors to use, and what to use them for.</p><p><code>DRAW_COLORS</code> is a 16 bit value that holds 4 indexes. Bits 0-3 (the least significant bits)
hold the first draw color, bits 4-7 hold the second draw color, and so on.</p><p>Setting a draw color to <code>1</code> means use <code>PALETTE</code> color 1 for that draw color. The same applies
when setting a draw color to <code>2</code>, <code>3</code>, or <code>4</code>.</p><p>For example, <code>rect()</code> uses the first draw color for the fill color, and the second draw color
as the outline color. To draw a light-green (palette color 2) rectangle with a black (palette color 4) outline:</p><div><div class="multilang"><div class="dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">AssemblyScript </a><ul class="dropdown__menu text--left"><li><a class="dropdown__link dropdown__link--active" href="/docs/guides/basic-drawing?code-lang=assemblyscript#no-scroll">AssemblyScript</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=c#no-scroll">C / C++</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=c3#no-scroll">C3</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=d#no-scroll">D</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=go#no-scroll">Go</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=nelua#no-scroll">Nelua</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=nim#no-scroll">Nim</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=odin#no-scroll">Odin</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=penne#no-scroll">Penne</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=porth#no-scroll">Porth</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=roland#no-scroll">Roland</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=rust#no-scroll">Rust</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=wat#no-scroll">WebAssembly Text</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=zig#no-scroll">Zig</a></li></ul></div></div><div><div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token generic-function function" style="color:rgb(80, 250, 123)">store</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u16</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">DRAW_COLORS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">0x42</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">rect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token operator">*</span><span class="token plain">DRAW_COLORS </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0x42</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">rect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c3"><pre tabindex="0" class="prism-code language-c3 codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">*w4::DRAW_COLORS = 0x42;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4::rect(10, 10, 32, 32);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly d"><pre tabindex="0" class="prism-code language-d codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">*w4.drawColors = 0x42;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.rect(10, 10, 32, 32);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token operator">*</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">DRAW_COLORS </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0x42</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Rect</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$DRAW_COLORS = 0x42</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rect(10, 10, 32, 32)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly nim"><pre tabindex="0" class="prism-code language-nim codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">DRAW_COLORS[] = 0x42</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rect(10, 10, 32, 32)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly odin"><pre tabindex="0" class="prism-code language-odin codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.DRAW_COLORS^ = 0x42</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.rect(10, 10, 32, 32)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly penne"><pre tabindex="0" class="prism-code language-penne codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">DRAW_COLORS = 0x42;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rect(10, 10, 32, 32);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly porth"><pre tabindex="0" class="prism-code language-porth codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">0x42 $DRAW_COLORS !16</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">32 32 10 10 rect</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly roland"><pre tabindex="0" class="prism-code language-roland codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">DRAW_COLORS~ = 0x42;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rect(10, 10, 32, 32);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">unsafe { *DRAW_COLORS = 0x42 }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">rect(10, 10, 32, 32);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly wasm"><pre tabindex="0" class="prism-code language-wasm codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">;; Set DRAW_COLORS to 0x42.</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">store16</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">global</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$DRAW_COLORS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">0x42</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">;; Draw a rectangle at (10, 10) with size (32, 32).</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">call</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$rect</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly zig"><pre tabindex="0" class="prism-code language-zig codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.DRAW_COLORS.* = 0x42;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">w4.rect(10, 10, 32, 32);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>However, setting a draw color to <code>0</code> will make it transparent. For example, to
draw a black outlined rectangle with no fill, set <code>DRAW_COLORS</code> to <code>0x40</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="other-shapes"></a>Other Shapes<a class="hash-link" href="#other-shapes" title="Direct link to heading">#</a></h2><p>For info on other shape drawing functions like <code>line()</code> and <code>oval()</code>, see the <a href="/docs/reference/functions">Functions</a> reference.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="direct-framebuffer-access"></a>Direct Framebuffer Access<a class="hash-link" href="#direct-framebuffer-access" title="Direct link to heading">#</a></h2><p>The <code>FRAMEBUFFER</code> memory region contains the framebuffer, with each byte containing 4 pixels (2 bits
per pixel). In the framebuffer, the palette colors 1-4 are represented numerically as 0-3.</p><p>For example, to clear the entire screen to palette color 4, we write 3 into each position:</p><div><div class="multilang"><div class="dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">AssemblyScript </a><ul class="dropdown__menu text--left"><li><a class="dropdown__link dropdown__link--active" href="/docs/guides/basic-drawing?code-lang=assemblyscript#no-scroll">AssemblyScript</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=c#no-scroll">C / C++</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=c3#no-scroll">C3</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=d#no-scroll">D</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=go#no-scroll">Go</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=nelua#no-scroll">Nelua</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=nim#no-scroll">Nim</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=odin#no-scroll">Odin</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=penne#no-scroll">Penne</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=porth#no-scroll">Porth</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=roland#no-scroll">Roland</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=rust#no-scroll">Rust</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=wat#no-scroll">WebAssembly Text</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=zig#no-scroll">Zig</a></li></ul></div></div><div><div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">memory</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token method function property-access" style="color:rgb(80, 250, 123)">fill</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">FRAMEBUFFER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">160</span><span class="token operator">*</span><span class="token number">160</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">memset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">FRAMEBUFFER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">160</span><span class="token operator">*</span><span class="token number">160</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c3"><pre tabindex="0" class="prism-code language-c3 codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">mem::set(w4::FRAMEBUFFER, 3 | (3 &lt;&lt; 2) | (3 &lt;&lt; 4) | (3 &lt;&lt; 6), 160*160/4);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly d"><pre tabindex="0" class="prism-code language-d codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// Requires WASI_SDK_PATH to be set!</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import core.stdc.string;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">memset(w4.framebuffer, 3 | (3 &lt;&lt; 2) | (3 &lt;&lt; 4) | (3 &lt;&lt; 6), 160*160/4);</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> i </span><span class="token operator">:=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">range</span><span class="token plain"> w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">FRAMEBUFFER </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">FRAMEBUFFER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">require &quot;memory&quot;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">memory.set(FRAMEBUFFER, (3 | (3 &lt;&lt; 2) | (3 &lt;&lt; 4) | (3 &lt;&lt; 6)), 160*160/4)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly nim"><pre tabindex="0" class="prism-code language-nim codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">for i in 0..&lt;len(FRAMEBUFFER[]):</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  FRAMEBUFFER[i] = 3 or (3 shl 2) or (3 shl 4) or (3 shl 6)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly odin"><pre tabindex="0" class="prism-code language-odin codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">for _, i in w4.FRAMEBUFFER {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    w4.FRAMEBUFFER[i] = 3 | (3 &lt;&lt; 2) | (3 &lt;&lt; 4) | (3 &lt;&lt; 6)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly penne"><pre tabindex="0" class="prism-code language-penne codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var i = 0;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var value = 3 | (3 &lt;&lt; 2) | (3 &lt;&lt; 4) | (3 &lt;&lt; 6);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if i == |FRAMEBUFFER|</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            goto end;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        FRAMEBUFFER[i] = value;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        i = i + 1;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        loop;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly porth"><pre tabindex="0" class="prism-code language-porth codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$FRAMEBUFFER</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">0 while dup 6400 &lt; do</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  over over ptr+ 0xff swap !8</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  1 +</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end drop drop</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly roland"><pre tabindex="0" class="prism-code language-roland codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">for i in 0..FRAMEBUFFER~.length {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   FRAMEBUFFER~[i] = 3 | (3 &lt;&lt; 2) | (3 &lt;&lt; 4) | (3 &lt;&lt; 6);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">unsafe {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    (&amp;mut *FRAMEBUFFER).fill(3 | (3 &lt;&lt; 2) | (3 &lt;&lt; 4) | (3 &lt;&lt; 6));</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly wasm"><pre tabindex="0" class="prism-code language-wasm codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">;; i = 0;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">loop</span><span class="token plain"> $</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">loop</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; FRAMEBUFFER[i] = 0xff;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">store8</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">offset</span><span class="token keyword operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token number">0xa0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">0xff</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; i = i + 1;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.set </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">add</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; loop while i &lt; 160*160/4</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">br_if</span><span class="token plain"> $</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">loop</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">lt_u</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$i</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">6400</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly zig"><pre tabindex="0" class="prism-code language-zig codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">for (w4.FRAMEBUFFER) |*x| {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    x.* = 3 | (3 &lt;&lt; 2) | (3 &lt;&lt; 4) | (3 &lt;&lt; 6);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Advanced users can implement their own drawing functions by carefully manipulating the framebuffer.
For example, to implement a <code>pixel()</code> function that draws a single pixel:</p><div><div class="multilang"><div class="dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">AssemblyScript </a><ul class="dropdown__menu text--left"><li><a class="dropdown__link dropdown__link--active" href="/docs/guides/basic-drawing?code-lang=assemblyscript#no-scroll">AssemblyScript</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=c#no-scroll">C / C++</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=c3#no-scroll">C3</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=d#no-scroll">D</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=go#no-scroll">Go</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=nelua#no-scroll">Nelua</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=nim#no-scroll">Nim</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=odin#no-scroll">Odin</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=penne#no-scroll">Penne</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=porth#no-scroll">Porth</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=roland#no-scroll">Roland</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=rust#no-scroll">Rust</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=wat#no-scroll">WebAssembly Text</a></li><li><a class="dropdown__link" href="/docs/guides/basic-drawing?code-lang=zig#no-scroll">Zig</a></li></ul></div></div><div><div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">pixel</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">x</span><span class="token operator">:</span><span class="token plain"> i32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> y</span><span class="token operator">:</span><span class="token plain"> i32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// The byte index into the framebuffer that contains (x, y)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> idx </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">y</span><span class="token operator">*</span><span class="token number">160</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&gt;&gt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Calculate the bits within the byte that corresponds to our position</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> shift </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">u8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">x </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0b11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> mask </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">u8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0b11</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> shift</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Use the first DRAW_COLOR as the pixel color.</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> palette_color </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">u8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token generic-function function" style="color:rgb(80, 250, 123)">load</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u16</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">DRAW_COLORS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0b1111</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">palette_color </span><span class="token operator">==</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// Transparent</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> color </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">palette_color </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0b11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Write to the framebuffer</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token generic-function function" style="color:rgb(80, 250, 123)">store</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u8</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">FRAMEBUFFER</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">color </span><span class="token operator">&lt;&lt;</span><span class="token plain"> shift</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token generic-function function" style="color:rgb(80, 250, 123)">load</span><span class="token generic-function generic class-name operator">&lt;</span><span class="token generic-function generic class-name">u8</span><span class="token generic-function generic class-name operator">&gt;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token constant" style="color:rgb(189, 147, 249)">FRAMEBUFFER</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token operator">~</span><span class="token plain">mask</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">pixel</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// The byte index into the framebuffer that contains (x, y)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> idx </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">y</span><span class="token operator">*</span><span class="token number">160</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&gt;&gt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Calculate the bits within the byte that corresponds to our position</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> shift </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">x </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">b11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> mask </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">b11 </span><span class="token operator">&lt;&lt;</span><span class="token plain"> shift</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Use the first DRAW_COLOR as the pixel color</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> palette_color </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">DRAW_COLORS </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">b1111</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">palette_color </span><span class="token operator">==</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// Transparent</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> color </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">palette_color </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">b11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Write to the framebuffer</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    FRAMEBUFFER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">color </span><span class="token operator">&lt;&lt;</span><span class="token plain"> shift</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">FRAMEBUFFER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token operator">~</span><span class="token plain">mask</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c3"><pre tabindex="0" class="prism-code language-c3 codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">fn void pixel(int x, int y) </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // The byte index into the framebuffer that contains (x, y)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int idx = (y * 160 + x) &gt;&gt; 2;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Calculate the bits within the byte that corresponds to our position</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int shift = (x &amp; 0b11) &lt;&lt; 1;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int mask = 0b11 &lt;&lt; shift;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Use the first DRAW_COLOR as the pixel color</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int palette_color = *w4::DRAW_COLORS &amp; 0b1111;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (palette_color == 0) </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Transparent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int color = (palette_color - 1) &amp; 0b11;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Write to the framebuffer</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    w4::FRAMEBUFFER[idx] = (color &lt;&lt; shift) | (w4::FRAMEBUFFER[idx] &amp; ~mask);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly d"><pre tabindex="0" class="prism-code language-d codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">void pixel(int x, int y) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // The byte index into the framebuffer that contains (x, y)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int idx = (y * w4.screenSize + x) &gt;&gt; 2;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Calculate the bits within the byte that corresponds to our position</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int shift = (x &amp; 0b11) &lt;&lt; 1;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int mask = 0b11 &lt;&lt; shift;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Use the first draw color as the pixel color</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int palette_color = *w4.drawColors &amp; 0b1111;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (palette_color == 0) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Transparent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int color = (palette_color - 1) &amp; 0b11;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Write to the framebuffer</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    w4.framebuffer[idx] =</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        cast(ubyte)((color &lt;&lt; shift) | (w4.framebuffer[idx] &amp; ~mask));</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> pixel </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">x </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> y </span><span class="token builtin" style="color:rgb(189, 147, 249)">int</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// The byte index into the framebuffer that contains (x, y)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> idx </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">y</span><span class="token operator">*</span><span class="token number">160</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&gt;&gt;</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Calculate the bits within the byte that corresponds to our position</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> shift </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">uint8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">x </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">b11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&lt;&lt;</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> mask </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">uint8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0</span><span class="token plain">b11 </span><span class="token operator">&lt;&lt;</span><span class="token plain"> shift</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Use the first DRAW_COLOR as the pixel color</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> palette_color </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">uint8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">DRAW_COLORS </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">b1111</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> palette_color </span><span class="token operator">==</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token comment" style="color:rgb(98, 114, 164)">// Transparent</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> color </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">uint8</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">palette_color </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">b11</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Write to the framebuffer</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">FRAMEBUFFER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">color </span><span class="token operator">&lt;&lt;</span><span class="token plain"> shift</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">w4</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">FRAMEBUFFER</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token operator">&amp;^</span><span class="token plain"> mask</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly lua"><pre tabindex="0" class="prism-code language-lua codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">local function pixel(x: integer, y: integer)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- The byte index into the framebuffer that contains (x, y)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    local idx = (y*160 + x) &gt;&gt; 2</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- Calculate the bits within the byte that corresponds to our position</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    local shift = (x &amp; 0b11) &lt;&lt; 1</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    local mask = 0b11 &lt;&lt; shift</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- Use the first DRAW_COLOR as the pixel color</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    local palette_color = $DRAW_COLORS &amp; 0b1111</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (palette_color == 0) then</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        -- Transparent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    local color = (palette_color - 1) &amp; 0b11;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    -- Write to the framebuffer</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    FRAMEBUFFER[idx] = (color &lt;&lt; shift) | (FRAMEBUFFER[idx] &amp; ~mask)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">end</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly nim"><pre tabindex="0" class="prism-code language-nim codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">proc pixel(x, y: int32) =</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # The byte index into the framebuffer that contains (x, y)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  let idx = (y * SCREEN_SIZE + x) shr 2</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # Calculate the bits within the byte that corresponds to our position</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  let shift = (x and 0b11) shl 1</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  let mask = uint8(0b11 shl shift)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # Use the first DRAW_COLOR as the pixel color</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  let palette_color = uint8(DRAW_COLORS[] and 0b1111)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  if (palette_color == 0) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      // Transparent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  let color = (palette_color - 1) &amp; 0b11</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  # Write to the framebuffer</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  FRAMEBUFFER[idx] = uint8((color shl shift) or (FRAMEBUFFER[idx] and not mask))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly odin"><pre tabindex="0" class="prism-code language-odin codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pixel :: proc &quot;c&quot; (x : int, y : int) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // The byte index into the framebuffer that contains (x, y)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    idx := (y*160 + x) &gt;&gt; 2</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Calculate the bits within the byte that corresponds to our position</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    shift := u8((x &amp; 0b11) &lt;&lt; 1)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    mask := u8(0b11 &lt;&lt; shift)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Use the first DRAW_COLOR as the pixel color</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    palette_color := u8(w4.DRAW_COLORS^ &amp; 0b1111)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (palette_color == 0) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Transparent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    color := (palette_color - 1) &amp; 0b11;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Write to the framebuffer</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    w4.FRAMEBUFFER[idx] = (color &lt;&lt; shift) | (w4.FRAMEBUFFER[idx] &amp;~ mask)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly penne"><pre tabindex="0" class="prism-code language-penne codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">fn pixel(x: i32, y: i32)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // The byte index into the framebuffer that contains (x, y).</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var idx = ((y as u32 * SCREEN_SIZE + x as u32) &gt;&gt; 2) as usize;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Calculate the bits within the byte that corresponds to our position.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var shift = (x as u8 &amp; 0b11) &lt;&lt; 1;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var mask = 0b11 &lt;&lt; shift;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Use the first DRAW_COLOR as the pixel color.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var palette_color = (DRAW_COLORS &amp; 0b1111) as u8;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if palette_color == 0</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Transparent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        goto end;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var color = (palette_color - 1) &amp; 0b11;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Write to the framebuffer.</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    FRAMEBUFFER[idx] = (color &lt;&lt; shift) | (FRAMEBUFFER[idx] &amp; !mask);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    end:</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly porth"><pre tabindex="0" class="prism-code language-porth codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// TODO</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly roland"><pre tabindex="0" class="prism-code language-roland codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">proc pixel(x: i32, y: i32) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // The byte index into the framebuffer that contains (x, y)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   let idx = (y transmute usize * 160 + x transmute usize) &gt;&gt; 2;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // Calculate the bits within the byte that corresponds to our position</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   let shift = (x truncate u8 &amp; 0b11) &lt;&lt; 1;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   let mask = 0b11 &lt;&lt; shift;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   let palette_color: u8 = (DRAW_COLORS~ &amp; 0xf) truncate u8;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   if (palette_color == 0) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      // Transparent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      return;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   let color = (palette_color - 1) &amp; 0b11;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   // Write to the framebuffer</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   FRAMEBUFFER~[idx] = (color &lt;&lt; shift) | (FRAMEBUFFER~[idx] &amp; !mask);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">fn pixel(x: i32, y: i32) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // The byte index into the framebuffer that contains (x, y)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    let idx = (y as usize * 160 + x as usize) &gt;&gt; 2;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Calculate the bits within the byte that corresponds to our position</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    let shift = (x as u8 &amp; 0b11) &lt;&lt; 1;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    let mask = 0b11 &lt;&lt; shift;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    unsafe {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        let palette_color: u8 = (*DRAW_COLORS &amp; 0xf) as u8;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (palette_color == 0) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            // Transparent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            return;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        let color = (palette_color - 1) &amp; 0b11;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        let framebuffer = &amp;mut *FRAMEBUFFER;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        framebuffer[idx] = (color &lt;&lt; shift) | (framebuffer[idx] &amp; !mask);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly wasm"><pre tabindex="0" class="prism-code language-wasm codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">func</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$pixel</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">param</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$x</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">param</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$y</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$idx</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$shift</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$mask</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain"> </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$color</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; The byte index into the framebuffer that contains (x, y)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;;  idx = (y*160 + x) &gt;&gt; 2;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.set </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$idx</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">shr_u</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">add</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mul</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$y</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">160</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; Calculate the bits within the byte that corresponds to our position</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; shift = (x &amp; 0b11) &lt;&lt; 1;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.set </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$shift</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">mul</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">and</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$x</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; mask = 0b11 &lt;&lt; shift;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.set </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$mask</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">shl</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$shift</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; Use the first DRAW_COLOR as the pixel color</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; color = *DRAW_COLORS &amp; 0b1111;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.set </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$color</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">and</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">load16_u</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">global</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$DRAW_COLORS</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">15</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; return if $color is zero, then subtract 1 and mask.</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">eqz</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$color</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">then</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.set </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$color</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">and</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">sub</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$color</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; Write to the framebuffer:</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; FRAMEBUFFER[idx] = (color &lt;&lt; shift) | (FRAMEBUFFER[idx] &amp; ~mask);</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; Note that WebAssembly doesn&#x27;t have a bitwise not instruction, so</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">;; `~n` becomes `n ^ ~0` (where -1 is used for ~0 below).</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">store8</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">offset</span><span class="token keyword operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token number">0xa0</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">or</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">shl</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$color</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$shift</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">and</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">load8_u</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">offset</span><span class="token keyword operator" style="color:rgb(189, 147, 249);font-style:italic">=</span><span class="token number">0xa0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$idx</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">xor</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">local</span><span class="token plain">.get </span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$mask</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">i32</span><span class="token keyword punctuation" style="color:rgb(248, 248, 242);font-style:italic">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">const</span><span class="token plain"> </span><span class="token number">-1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly zig"><pre tabindex="0" class="prism-code language-zig codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">fn pixel(x: i32, y: i32) void {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // The byte index into the framebuffer that contains (x, y)</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    const idx = (@intCast(usize, y) * 160 + @intCast(usize, x)) &gt;&gt; 2;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Calculate the bits within the byte that corresponds to our position</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    const shift = @intCast(u3, (x &amp; 0b11) * 2);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    const mask = @as(u8, 0b11) &lt;&lt; shift;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Use the first DRAW_COLOR as the pixel color</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    const palette_color = @intCast(u8, w4.DRAW_COLORS.* &amp; 0b1111);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if (palette_color == 0) {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Transparent</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        return;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    const color = (palette_color - 1) &amp; 0b11;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Write to the framebuffer</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    w4.FRAMEBUFFER[idx] = (color &lt;&lt; shift) | (w4.FRAMEBUFFER[idx] &amp; ~mask);</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/aduros/wasm4/edit/main/site/docs/guides/basic-drawing.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/getting-started/hello-world"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Hello World</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/guides/user-input"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Handling User Input »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-palette-register" class="table-of-contents__link">The <code>PALETTE</code> Register</a></li><li><a href="#the-draw_colors-register" class="table-of-contents__link">The <code>DRAW_COLORS</code> Register</a></li><li><a href="#other-shapes" class="table-of-contents__link">Other Shapes</a></li><li><a href="#direct-framebuffer-access" class="table-of-contents__link">Direct Framebuffer Access</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/assets/js/runtime~main.84aff5fe.js"></script>
<script src="/assets/js/main.1e3cb70e.js"></script>
</body>
</html>