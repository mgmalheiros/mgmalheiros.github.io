<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/wasm4/blog/rss.xml" title="WASM-4 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/wasm4/blog/atom.xml" title="WASM-4 Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="WASM-4" href="/wasm4/opensearch.xml"><title data-react-helmet="true">Multiplayer | WASM-4</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://wasm4.org/wasm4/docs/guides/multiplayer"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Multiplayer | WASM-4"><meta data-react-helmet="true" name="description" content="WASM-4 supports realtime multiplayer of up to 4 players, either locally or online."><meta data-react-helmet="true" property="og:description" content="WASM-4 supports realtime multiplayer of up to 4 players, either locally or online."><meta data-react-helmet="true" property="og:image" content="https://wasm4.org/wasm4/img/logo.png"><meta data-react-helmet="true" name="twitter:image" content="https://wasm4.org/wasm4/img/logo.png"><link data-react-helmet="true" rel="shortcut icon" href="/wasm4/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://wasm4.org/wasm4/docs/guides/multiplayer"><link data-react-helmet="true" rel="alternate" href="https://wasm4.org/wasm4/docs/guides/multiplayer" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://wasm4.org/wasm4/docs/guides/multiplayer" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/wasm4/assets/css/styles.1cf596c0.css">
<link rel="preload" href="/wasm4/assets/js/runtime~main.53a02d92.js" as="script">
<link rel="preload" href="/wasm4/assets/js/main.fc48bf66.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/wasm4/"><img src="/wasm4/img/logo.svg" alt="WASM-4 Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/wasm4/img/logo.svg" alt="WASM-4 Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">WASM-4</b></a><a class="navbar__item navbar__link" href="/wasm4/play">Play</a><a class="navbar__item navbar__link navbar__link--active" href="/wasm4/docs/">Learn</a><a class="navbar__item navbar__link" href="/wasm4/blog">Blog</a><a class="navbar__item navbar__link" href="/wasm4/community">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/aduros/wasm4" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/wasm4/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/getting-started/setup">Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/getting-started/hello-world">Hello World</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/basic-drawing">Drawing Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/user-input">Handling User Input</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/sprites">Drawing Sprites</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/text">Drawing Text</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/audio">Playing Audio</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/saving-data">Saving Data</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/wasm4/docs/guides/multiplayer">Multiplayer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/guides/distribution">Distribution</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Reference</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/reference/functions">Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/reference/memory">Memory Layout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/reference/hotkeys">Emulator Hotkeys</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/reference/cli">CLI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wasm4/docs/reference/inspiration">Inspiration</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLinkText_1J2g">Tutorials</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Snake</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Making music with IWAS</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Multiplayer</h1></header><p>WASM-4 supports realtime multiplayer of up to 4 players, either locally or online.</p><p>Detecting <a href="/wasm4/docs/guides/user-input#gamepad">gamepad input</a> for Player 2 is the same as usual, but instead of
<code>GAMEPAD1</code>, you read from <code>GAMEPAD2</code>. For Players 3 and 4, <code>GAMEPAD3</code> and <code>GAMEPAD4</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="local-multiplayer"></a>Local Multiplayer<a class="hash-link" href="#local-multiplayer" title="Direct link to heading">#</a></h2><p>Local multiplayer is where everyone is playing on the same computer. To play local multiplayer, you
can connect multiple physical USB controllers. Xbox or PlayStation controllers are known to work
best.</p><p>If all you have is a keyboard, up to 3 players can be controlled from one keyboard using these keys:</p><table><thead><tr><th>Player #</th><th>Directions</th><th>X button</th><th>Z button</th></tr></thead><tbody><tr><td>1</td><td>Arrows</td><td><code>.</code> (period)</td><td><code>,</code> (comma)</td></tr><tr><td>2</td><td><code>ESDF</code></td><td><code>A</code> or <code>Q</code></td><td><code>Tab</code> or <code>LShift</code></td></tr><tr><td>3</td><td>Numpad <code>8456</code></td><td>Numpad <code>*</code> or <code>.</code></td><td>Numpad <code>-</code> or <code>Enter</code></td></tr></tbody></table><p>This key layout is designed to fit many hands on one keyboard somewhat comfortably.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="netplay"></a>Netplay<a class="hash-link" href="#netplay" title="Direct link to heading">#</a></h2><p>Netplay connects gamepad inputs over the Internet using WebRTC. WASM-4 implements <a href="https://www.youtube.com/watch?v=0NLe4IpdS1w" target="_blank" rel="noopener noreferrer">rollback
netcode</a> to keep games fast and responsive.</p><p>Hosting a netplay game is as easy as copy and pasting a link.</p><ol><li>While playing any cart, press Enter to open the WASM-4 menu.</li><li>Select &quot;Copy Netplay URL&quot;. An invite link (like <code>https://wasm4.org/netplay/#ABCDEF</code>) will be
copied to your clipboard for you to send to a friend.</li><li>When your friend clicks your link, they&#x27;ll instantly join your game.</li></ol><p>All WASM-4 games that support local multiplayer automatically support netplay. There are no
additional steps developers need to take to make their games netplay-ready.</p><p>There are currently some caveats to keep in mind:</p><ul><li>Mouse input is disabled during netplay.</li><li>State saving/loading and cart reset is currently disabled during netplay.</li><li>Netplay is new and there may be bugs, please <a href="https://github.com/aduros/wasm4/issues/new" target="_blank" rel="noopener noreferrer">report
issues</a>!</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="the-netplay-memory-register"></a>The <code>NETPLAY</code> memory register<a class="hash-link" href="#the-netplay-memory-register" title="Direct link to heading">#</a></h3><p>WASM-4 exposes the state of netplay to the cart via the <a href="/wasm4/docs/reference/memory#netplay"><code>NETPLAY</code></a>
memory register.</p><p>Reading this register is not required to implement netplay, but it can be used to implement advanced
features such as non-shared screen multiplayer:</p><div><div class="multilang"><div class="dropdown dropdown--hoverable dropdown--right"><a class="navbar__link">C / C++ </a><ul class="dropdown__menu text--left"><li><a class="dropdown__link dropdown__link--active" href="/wasm4/docs/guides/multiplayer?code-lang=c#no-scroll">C / C++</a></li><li><a class="dropdown__link" href="/wasm4/docs/guides/multiplayer?code-lang=c3#no-scroll">C3</a></li><li><a class="dropdown__link" href="/wasm4/docs/guides/multiplayer?code-lang=penne#no-scroll">Penne</a></li><li><a class="dropdown__link" href="/wasm4/docs/guides/multiplayer?code-lang=rust#no-scroll">Rust</a></li></ul></div></div><div><div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c"><pre tabindex="0" class="prism-code language-c codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// If netplay is active</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">*</span><span class="token plain">NETPLAY </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">b100</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">int</span><span class="token plain"> playerIdx </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">*</span><span class="token plain">NETPLAY </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain">b011</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// Render the game from playerIdx&#x27;s perspective</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token comment" style="color:rgb(98, 114, 164)">// ...</span><span class="token plain"></span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly c3"><pre tabindex="0" class="prism-code language-c3 codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// If netplay is active</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if (*w4::NETPLAY &amp; 0b100) </span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    int player_idx = *w4::NETPLAY &amp; 0b011;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Render the game from player_idx&#x27;s perspective</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly penne"><pre tabindex="0" class="prism-code language-penne codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">// If netplay is active</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if NETPLAY &amp; 0b100</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    var player_idx = NETPLAY &amp; 0b011;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // Render the game from playerIdx&#x27;s perspective</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">unsafe {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    // If netplay is active</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    if *NETPLAY &amp; 0b100 != 0 {</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        let player_idx = *NETPLAY &amp; 0b011;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // Render the game from player_idx&#x27;s perspective</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        // ...</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>This is a powerful feature enabling games with hidden information, like card games, strategy games,
and first person shooters. However, caution must be taken by developers to not introduce
desynchronization. In other words, the netplay player index should only be used to adjust how a
frame is rendered, and not affect game logic. Each connected player must run the same game logic for
all players in order to prevent desyncs.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/aduros/wasm4/edit/main/site/docs/guides/multiplayer.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/wasm4/docs/guides/saving-data"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Saving Data</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/wasm4/docs/guides/distribution"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Distribution »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#local-multiplayer" class="table-of-contents__link">Local Multiplayer</a></li><li><a href="#netplay" class="table-of-contents__link">Netplay</a><ul><li><a href="#the-netplay-memory-register" class="table-of-contents__link">The <code>NETPLAY</code> memory register</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/wasm4/assets/js/runtime~main.53a02d92.js"></script>
<script src="/wasm4/assets/js/main.fc48bf66.js"></script>
</body>
</html>